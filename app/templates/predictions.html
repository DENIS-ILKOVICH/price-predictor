{% extends 'index.html' %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename=style_href) }}">
{% endblock %}

{% block content %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<h1 class="main-title">Prediction History</h1>
<p class="subtitle">Here you can view the history of predictions made by users who used our calculator</p>
<hr class="hr-style">

<div class="filters">
    <button class="search-predict" onclick="cleanFilterPredictions()">Clear</button>
    <div class="input-group">
        <label for="searchPrice" class="input-label">Predicted Price</label>
        <div class="input-number-container">
            <input type="text" id="searchPrice" class="input-field" placeholder="Price">
        </div>
    </div>

    <div class="input-group">
        <label for="searchRequestId" class="input-label">Prediction ID</label>
        <div class="input-number-container">
            <input type="text" id="searchRequestId" class="input-field" placeholder="Prediction ID">
        </div>
    </div>
    <button class="search-predict" onclick="filterPredictions()">Search</button>
</div>

<div id="predictionsContainer"></div>

<div id="loadMoreContainer" style="display: none;">
    <button class="load-more" onclick="loadMorePredictions()">+ Load More</button>
</div>

<button id="backToTop" onclick="scrollToTop()">
    <span class="arrow">↑</span>
    <span class="text">Top</span>
</button>

<div id="deletePredictionsForm" class="delete-predictions-form" style="display: none;">
    <button type="button" class="close-btn" onclick="document.getElementById('deletePredictionsForm').style.display='none'">✖</button>

    <h3>Delete Predictions</h3>

    <form id="delForm">
        <div class="form-group">
            <label for="deleteMode">Deletion Mode</label>
            <select id="deleteMode" name="delete_mode" required>
                <option value="remove_id">Delete by ID</option>
                <option value="remove_top">Delete from Start</option>
                <option value="remove_bottom">Delete from End</option>
            </select>
        </div>

        <div class="form-group">
            <label for="valueInput">Value</label>
            <input type="text" id="valueInput" name="value" placeholder="Enter value to delete" required>
        </div>

        <div class="form-group">
            <button type="submit" id="submitDeleteBtn">Delete</button>
        </div>
    </form>
</div>

<button id="openDeleteFormBtn" style="display: none;">Menu</button>

<script src="{{ url_for('static', filename=js_href) }}"></script>

{% endblock %}
